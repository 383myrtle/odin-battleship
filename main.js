(()=>{"use strict";var t={327:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(601),l=n.n(r),a=n(314),i=n.n(a)()(l());i.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const o=i},474:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(601),l=n.n(r),a=n(314),i=n.n(a)()(l());i.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const o=i},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,l,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);r&&i[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),l&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=l):c[4]="".concat(l)),e.push(c))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},i=[],o=0;o<t.length;o++){var s=t[o],u=r.base?s[0]+r.base:s[0],c=a[u]||0,d="".concat(u," ").concat(c);a[u]=c+1;var h=n(d),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var m=l(p,r);r.byIndex=o,e.splice(o,0,{identifier:d,updater:m,references:1})}i.push(d)}return i}function l(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,l){var a=r(t=t||[],l=l||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var o=n(a[i]);e[o].references--}for(var s=r(t,l),u=0;u<a.length;u++){var c=n(a[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}a=s}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var l=void 0!==n.layer;l&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,l&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var l=e[r];if(void 0!==l)return l.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,n.d({},{L:()=>N});var r=n(72),l=n.n(r),a=n(825),i=n.n(a),o=n(659),s=n.n(o),u=n(56),c=n.n(u),d=n(540),h=n.n(d),p=n(113),m=n.n(p),f=n(474),y={};y.styleTagTransform=m(),y.setAttributes=c(),y.insert=s().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=h(),l()(f.A,y),f.A&&f.A.locals&&f.A.locals;var v=n(327),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h(),l()(v.A,g),v.A&&v.A.locals&&v.A.locals;class b{constructor(){this.initialize()}place(t,e,n,r){switch(this.validateCoords(e,n),this.validateShipPlacement(t,e,n,r),this.addShip(t),r){case"vertical":n-1>=0&&(this.board[e][n-1]=0),n+t.length<10&&(this.board[e][n+t.length]=0);for(let r=0;r<t.length;r++)this.board[e][n+r]=t,e-1>0&&(this.board[e-1][n+r]=0),e+1<10&&(this.board[e+1][n+r]=0);break;case"horizontal":e-1>=0&&(this.board[e-1][n]=0),e+t.length<10&&(this.board[e+t.length][n]=0);for(let r=0;r<t.length;r++)this.board[e+r][n]=t,n-1>0&&(this.board[e+r][n+-1]=0),n+1<10&&(this.board[e+r][n+1]=0);break;default:throw this.orientationUndefinedError}}addShip(t){this.ships.includes(t)||this.ships.push(t)}validateShipPlacement(t,e,n,r){switch(r){case"vertical":if(n+t.length>9)throw this.outOfBoundsError;if(this.board[e].slice(n,n+t.length).some((t=>null!==t)))throw this.shipOverlapError;break;case"horizontal":if(e+t.length>9)throw this.outOfBoundsError;if(this.board.slice(e,e+t.length).some((t=>null!==t[n])))throw this.shipOverlapError;break;default:throw this.orientationUndefinedError}}receiveAttack(t,e){return this.validateCoords(t,e),this.board[t][e]?(this.board[t][e].hit(),this.receivedAttacks[t][e]=1,!0):(this.receivedAttacks[t][e]=1,!1)}allShipsSunk(){return!this.ships.some((t=>!t.isSunk()))}validateCoords(t,e){if(t<0||e<0||t>9||e>9)throw this.outOfBoundsError}initialize(){this.board=[[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null]],this.receivedAttacks=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],this.ships=[]}orientationUndefinedError=new Error("Error. Ship orientation not defined.");shipOverlapError=new Error("Error. Ship cannot overlap with already placed ship.");outOfBoundsError=new Error("Error. Ship out of bounds of board")}class E{constructor(t){this.length=t,this.numHits=0}set length(t){this._length=t}get length(){return this._length}set numHits(t){this._numHits=t}get numHits(){return this._numHits}hit(){this.numHits++}isSunk(){return this.numHits>=this.length}}class w{constructor(t="Computer"){this.gameboard=new b,this.name=t,this.type="Computer"===this.name?"opponent":"player"}shipSizes=[2,3,3,4,5];initializeRandomBoard(){this.gameboard.initialize(),this.shipSizes.forEach((t=>{const e=new E(t);let n=this.getRandomCoords(),r=!1;for(;!r;)try{this.gameboard.place(e,n.x,n.y,n.orientation),r=!0}catch{n=this.getRandomCoords()}}))}getRandomCoords(){return{x:Math.round(9*Math.random()),y:Math.round(9*Math.random()),orientation:["horizontal","vertical"][Math.round(Math.random())]}}}const k=document.querySelector(".player-board"),S=document.querySelector(".opponent-board"),x=document.getElementById("reshuffle"),C=document.getElementById("continue"),A=document.getElementById("name"),L=document.querySelector(".game-info"),M=document.querySelector(".main"),O=document.querySelector(".player-container .ships-remaining"),z=document.querySelector(".opponent-container .ships-remaining"),B=document.querySelector(".turn"),I=document.querySelector(".message"),T=document.getElementById("replay"),P=t=>{N.start(),x.classList.add("disabled"),j(t.target)};function R(t){return new Promise((e=>{S.addEventListener("click",(function n(r){console.log("Event listener added to opponent grid");const l=function(t,e){try{const n=t.target.closest(".cell"),r=parseInt(n.dataset.x),l=parseInt(n.dataset.y),a=e.gameboard.receiveAttack(r,l);return H(e),a}catch(t){console.log(t)}}(r,t);S.removeEventListener("click",n),e(l)}))}))}const q={player:{grid:k,shipCount:O},opponent:{grid:S,shipCount:z}},H=t=>{const e=q[t.type].grid;e.textContent="";for(let n=9;n>=0;n--)for(let r=0;r<10;r++){const l=W(t,r,n);e.appendChild(l)}q[t.type].shipCount.textContent=t.gameboard.ships.reduce(((t,e)=>t+(e.isSunk()?0:1)),0)};function W(t,e,n){const r=document.createElement("div");return r.classList.add("cell"),r.dataset.x=e,r.dataset.y=n,t.gameboard.board[e][n]&&"player"===t.type&&r.classList.add("has-ship"),1===t.gameboard.receivedAttacks[e][n]&&(t.gameboard.board[e][n]?r.classList.add("hit"):r.classList.add("miss")),r}const _=t=>{B.textContent=`${t.name}'s turn`,"player"===t.type?I.textContent="Click a square on the opponent's board to attack!":I.textContent=""};function j(t){t.classList.add("hidden")}function U(t){t.classList.remove("hidden")}const N=new class{initialize(t){this.player=new w(t),this.opponent=new w,this.player.initializeRandomBoard(),this.opponent.initializeRandomBoard(),H(this.player),H(this.opponent)}async start(){let t=this.checkWin();for(;!t.gameOver&&(_(this.player),await this.playerAttack(),t=this.checkWin(),!t.gameOver);)_(this.opponent),await this.randomOpponentAttack(),t=this.checkWin();var e;console.log(t),e=t.winner,B.textContent=`${e.name} won the game!`,I.textContent="Play again by pressing the button below",U(T)}async playerAttack(){let t;do{if(t=await R(this.opponent),this.checkWin().gameOver)return}while(t)}async randomOpponentAttack(){let t;do{let e,n;await this.delay(500);do{e=Math.round(9*Math.random()),n=Math.round(9*Math.random())}while(this.player.gameboard.receivedAttacks[e][n]);t=this.player.gameboard.receiveAttack(e,n),H(this.player)}while(t)}delay(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}checkWin(){return this.player.gameboard.allShipsSunk()?{winner:this.opponent,gameOver:!0}:this.opponent.gameboard.allShipsSunk()?{winner:this.player,gameOver:!0}:{gameOver:!1}}reset(){this.player.initializeRandomBoard(),this.opponent.initializeRandomBoard(),H(this.player),H(this.opponent)}reshufflePlayer(){this.player.initializeRandomBoard(),H(this.player)}};C.addEventListener("click",(t=>{t.preventDefault();const e=A.value;A.value="",N.initialize(e),U(M),function(){L.classList.remove("center"),L.textContent="",function(){const t=document.createElement("button");t.id="start-button",t.textContent="Start Game",t.addEventListener("click",P),L.appendChild(t)}();const t=document.createElement("div");t.classList.add("rules"),t.innerHTML="          \n          <h2>Rules</h2>\n          <ol>\n            <li>Each player has a 10x10 board.</li>\n            <li>Each player has 5 ships: Carrier (5), Battleship (4), Cruiser (3), Submarine (3), Destroyer (2).</li>\n            <li>Ships cannot overlap or be directly adjacent.</li>\n            <li>Ships cannot be placed diagonally.</li>\n            <li>Players take turns guessing the location of the opponent's ships.</li>\n            <li>When a player hits a ship, they get another turn.</li>\n            <li>The game ends when all of a player's ships are sunk.</li>\n          </ol>\n",L.appendChild(t)}()})),x.addEventListener("click",(()=>{x.classList.contains("disabled")||N.reshufflePlayer()})),T.addEventListener("click",(()=>{B.textContent="",I.textContent="",N.reset(),x.classList.remove("disabled"),j(T),U(document.getElementById("start-button"))}))})();